<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <style>
        .label {width: 200px;}
    </style>
</head>

<body>
    <h1>Test Bim Auth Api</h1>
    <p>
        <label class="label">Service Url</label><br/>
        <input type="text" id="serviceUrl" value="http://localhost:5000/v1/cookie" style="width: 600px;"/>
    </p>
    <p>
        [<a href="javascript:void()" onclick="getAllHeaders()">GetAllHeaders</a>] <i>Returns All Headers</i><br/>
    </p>
    <p>
        <label class="label">RESPONSE</label><br/>
        <textarea id="result" rows="4" cols="50" style="width: 600px;"/></textarea>
    </p>
</body>

<script lang="javascript">

    function getCookieByAuthHeader() {
        var serviceUrl = $("#serviceUrl").val();
        var token = $("#token").val();

        $.ajax({
         url: serviceUrl,
         type: "GET",
         headers:{'Authorization':'Bearer'+' '+ token},  //$localStorage.token
         xhrFields: { withCredentials: true },
         crossDomain: true,         
         success: function(res) { 
            $("#result").val(JSON.stringify(res));
         },
         error: function(error) {
            $("#result").val(JSON.stringify(error));
         }
        });
    }

    function getCookieByUri() {
        var token = $("#token").val();
        var serviceUrl = $("#serviceUrl").val() + "?token=" + token;

        $.ajax({
         url: serviceUrl,
         type: "GET",         
         xhrFields: { withCredentials: true },
         crossDomain: true,         
         success: function(res) { 
            $("#result").val(JSON.stringify(res));
         },
         error: function(error) {
            $("#result").val(JSON.stringify(error));
         }
        });
    }


    function deleteCookie() {
        var serviceUrl = $("#serviceUrl").val();

        $.ajax({
         url: serviceUrl,
         type: "DELETE",
         success: function(res) { 
            $("#result").val(JSON.stringify(res));
         },
         error: function(error) {
            $("#result").val(JSON.stringify(error));
         }
        });
    }    

</script>


</html>